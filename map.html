<html>

<head>
    <link rel="stylesheet" href="styles.css">
    <script type="text/javascript" src="main.js"></script>
    <script type="text/javascript">
        function createMap() {
            var url = new URL(window.location.href);
            var seed = url.searchParams.get("seed");
            if (!seed)
                return;

            var map = document.getElementById("map");

            loadJSON(function (response) {
                var data = JSON.parse(response);
                //var data = JSON.parse('[{"asteroid":"terra","seed":"SNDST-A-16001-0","list":[{"id":"hq","x":128,"y":189},{"id":"aetn","x":84,"y":111},{"id":"aetn","x":129,"y":327},{"id":"aetn","x":220,"y":169},{"id":"steam","x":188,"y":156},{"id":"methane","x":145,"y":128},{"id":"steam","x":72,"y":91},{"id":"methane","x":119,"y":127},{"id":"salt_water","x":135,"y":66},{"id":"oil_reservoir","x":159,"y":43},{"id":"oil_reservoir","x":144,"y":40},{"id":"oil_reservoir","x":209,"y":52},{"id":"vacillator","x":160,"y":149},{"id":"vacillator","x":105,"y":230},{"id":"vacillator","x":203,"y":122},{"id":"vacillator","x":223,"y":197},{"id":"vacillator","x":45,"y":40},{"id":"hot_co2","x":108,"y":47},{"id":"hot_hydrogen","x":191,"y":213},{"id":"hot_water","x":209,"y":307},{"id":"oil_drip","x":229,"y":59},{"id":"slush_water","x":127,"y":259},{"id":"hot_steam","x":182,"y":198},{"id":"methane","x":222,"y":79},{"id":"hot_co2","x":156,"y":89},{"id":"slush_water","x":22,"y":163},{"id":"hot_water","x":124,"y":237},{"id":"hot_po2","x":154,"y":74},{"id":"big_volcano","x":201,"y":40}]}]');
                for (var i = 0; i < data.length; i++)
                    if (data[i].seed == seed) {
                        document.getElementById("seed").innerHTML += ' | ' + data[i].seed;
                        for (const num of data[i].list) {
                            map.innerHTML += '<image href="/ONISeeds/images/' + num.id +
                                '.png" xlink:href="/ONISeeds/images/' + num.id + '.png" ' +
                                'height="10" width="10" x="' + num.x + '" y="' + (384 - num.y) + '"><title>' + dict[num.id] + '</title></image>';
                        }
                    }
            });
        }
        window.onload = createMap;
    </script>
</head>

<body>
    <div style="padding: 20px 0 20px 20px;cursor: pointer;" onclick="window.location.href='index.html'">
        <h1 id="seed">Oxygen Not Included Seed Map</h1>
        <h5>(base game, build 484114)</h6>
    </div>
    <div class="map"><svg id="map" viewBox="0 0 256 384" width="100%" xmlns="http://www.w3.org/2000/svg"
            style="margin-bottom: -6px;"></svg></div>
</body>

</html>